/*
 * Obsidian Todo.txt Plugin Styles
 */

/* ============================================
 * CSS Variables - Design System
 * ============================================
 * Apple-likeミニマルデザインのための統一変数システム
 * Obsidian標準変数を参照してテーマ自動対応
 * グループ化: Typography / Colors / Animation / Layout
 */

:root {
	/* ==================== Typography ==================== */
	/* 3-tier hierarchy for visual hierarchy */
	--font-size-large: 16px;   /* タイトル・見出し */
	--font-size-medium: 14px;  /* 本文 */
	--font-size-small: 12px;   /* 補助テキスト */

	--line-height-large: 1.5;
	--line-height-medium: 1.4;
	--line-height-small: 1.3;

	/* ==================== Colors ==================== */
	/* Obsidian標準変数を参照 - ダーク/ライトモード自動対応 */
	--color-background: var(--background-primary);
	--color-text: var(--text-normal);
	--color-border: var(--background-modifier-border);
	--color-focus: var(--interactive-accent);
	--color-hover: var(--background-modifier-hover);

	/* ==================== Animation ==================== */
	/* Apple-like smooth transitions - 150ms基準 */
	--transition-fast: all 0.1s ease;      /* 瞬時フィードバック */
	--transition-default: all 0.15s ease;  /* 標準アニメーション */
	--transition-slow: all 0.3s ease;      /* ゆったりアニメーション */

	/* Specific property transitions for performance */
	--transition-bg: background-color 0.15s ease;
	--transition-transform: transform 0.15s ease;
	--transition-shadow: box-shadow 0.15s ease;
	--transition-interactive: transform 0.15s ease, box-shadow 0.15s ease;
	--transition-focus: outline 0.15s ease, box-shadow 0.15s ease;

	/* Animation durations */
	--duration-fast: 0.1s;
	--duration-default: 0.15s;
	--duration-slow: 0.3s;
	--duration-checkmark: 0.2s;

	/* ==================== Layout ==================== */
	/* Spacing Scale - 4px基準の8の倍数システム */
	--spacing-xs: 4px;
	--spacing-sm: 8px;
	--spacing-md: 12px;
	--spacing-lg: 16px;
	--spacing-xl: 24px;

	/* Component Dimensions */
	--checkbox-size: 18px;
	--border-radius-sm: 4px;   /* チェックボックス・小要素 */
	--border-radius-md: 6px;   /* タスクアイテム */
	--border-radius-lg: 12px;  /* モーダル・カード */

	/* Modal Specific */
	--modal-border-radius: 12px;  /* Apple-like角丸 */

	/* Focus & Accessibility */
	--focus-outline-width: 2px;
	--focus-outline-offset: 2px;
}

/* ============================================
 * Task List - BEM Classes & Spacing
 * ============================================
 * RED PHASE - 検証基準:
 * - .task-itemクラス: padding 12px 16px
 * - タスク間マージン: 16px以上
 * - BEM命名規則: .block__element--modifier
 * - スペーシングユーティリティクラス
 * 検証方法: クラス定義とスペーシング値の確認
 */

/* Task Item - BEM Block */
.task-item {
	padding: 12px 16px;
	margin-bottom: 16px;
	border-radius: 6px;
	transition: var(--transition-bg);
}

/* Hover Animation - Smooth background transition */
.task-item:hover {
	background-color: var(--color-hover);
}

.task-item:last-child {
	margin-bottom: 0;
}

/* Task Item Elements - BEM */
.task-item__text {
	font-size: var(--font-size-medium);
	line-height: var(--line-height-medium);
}

.task-item__meta {
	font-size: var(--font-size-small);
	line-height: var(--line-height-small);
	opacity: 0.7;
}

/* Task Item Modifiers - BEM */
.task-item--completed {
	text-decoration: line-through;
	opacity: 0.6;
}

/* Legacy class support - to be migrated */
.completed {
	text-decoration: line-through;
	opacity: 0.6;
}

/* ============================================
 * Spacing Utilities
 * ============================================ */
.u-spacing-sm {
	margin-bottom: 8px;
}

.u-spacing-md {
	margin-bottom: 16px;
}

.u-spacing-lg {
	margin-bottom: 24px;
}

/* ============================================
 * Priority Badge - BEM Pattern
 * ============================================ */
.priority {
	font-weight: bold;
	margin-right: 0.5em;
	padding: 0.1em 0.3em;
	border-radius: 3px;
}

/* Priority Level Modifiers - Refactored to BEM pattern */
.priority--A {
	color: #fff;
	background-color: #e53935;
}

.priority--B {
	color: #fff;
	background-color: #fb8c00;
}

.priority--C {
	color: #000;
	background-color: #ffeb3b;
}

.priority--D,
.priority--E,
.priority--F,
.priority--G,
.priority--H,
.priority--I,
.priority--J,
.priority--K,
.priority--L,
.priority--M,
.priority--N,
.priority--O,
.priority--P,
.priority--Q,
.priority--R,
.priority--S,
.priority--T,
.priority--U,
.priority--V,
.priority--W,
.priority--X,
.priority--Y,
.priority--Z {
	color: #fff;
	background-color: #1e88e5;
}

/* Legacy support - to be migrated to BEM */
.priority-A { color: #fff; background-color: #e53935; }
.priority-B { color: #fff; background-color: #fb8c00; }
.priority-C { color: #000; background-color: #ffeb3b; }
.priority-D,
.priority-E,
.priority-F,
.priority-G,
.priority-H,
.priority-I,
.priority-J,
.priority-K,
.priority-L,
.priority-M,
.priority-N,
.priority-O,
.priority-P,
.priority-Q,
.priority-R,
.priority-S,
.priority-T,
.priority-U,
.priority-V,
.priority-W,
.priority-X,
.priority-Y,
.priority-Z { color: #fff; background-color: #1e88e5; }

/* ============================================
 * Checkbox - Custom Style & Animation
 * ============================================
 * RED PHASE - 検証基準（Sprint 40実装済み）:
 * - .task-item__checkboxクラス定義
 * - border-radius適用（角丸）
 * - transition: all 0.15s ease適用
 * - ホバー効果とチェック時アニメーション
 * - Obsidian標準スタイルとの調和
 * 検証方法: クラス定義とアニメーション動作の確認
 *
 * RED PHASE - Subtask 4: チェックマーク完了アニメーション
 * 追加検証基準:
 * - @keyframesでチェックマーク出現アニメーション定義
 * - スケール変化（0.5 → 1）とフェードイン（opacity 0 → 1）
 * - アニメーション時間200-300ms
 * - ease-out または bounce効果で自然な出現
 * 検証方法: チェックボックスクリック時、チェックマークが滑らかに出現
 */

/* Checkbox - BEM Element with CSS Variables */
.task-item__checkbox {
	appearance: none;
	width: var(--checkbox-size);
	height: var(--checkbox-size);
	border: 2px solid var(--color-border);
	border-radius: var(--border-radius-sm);
	margin-right: var(--spacing-md);
	cursor: pointer;
	transition: var(--transition-default);
	flex-shrink: 0;
	position: relative;
}

.task-item__checkbox:hover {
	border-color: var(--color-focus);
	transform: scale(1.05);
	box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb), 0.1);
}

.task-item__checkbox:checked {
	background-color: var(--color-focus);
	border-color: var(--color-focus);
}

.task-item__checkbox:checked::after {
	content: '✓';
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	color: white;
	font-size: 14px;
	font-weight: bold;
	line-height: 1;
	animation: checkmarkAppear var(--duration-checkmark) ease-out;
}

/* Checkmark appearance animation */
@keyframes checkmarkAppear {
	0% {
		opacity: 0;
		transform: translate(-50%, -50%) scale(0.5);
	}
	50% {
		transform: translate(-50%, -50%) scale(1.1);
	}
	100% {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1);
	}
}

/* ============================================
 * Accessibility & Theme Support
 * ============================================
 * RED PHASE - 検証基準（Sprint 40実装済み）:
 * - :focus-visibleスタイル定義（すべてのインタラクティブ要素）
 * - キーボードナビゲーションで視覚的フィードバック
 * - CSS変数でダーク/ライトモード両対応
 * - コントラスト比確保（WCAG AA基準）
 * - アウトライン・シャドウでフォーカス明示
 * 検証方法: Tabキーナビゲーション、両モードでの視認性確認
 *
 * RED PHASE - Subtask 3: フォーカスハイライト強化
 * 追加検証基準:
 * - フォーカス遷移に滑らかなアニメーション追加
 * - :focus-visibleでのoutline/box-shadowにtransition適用
 * - すべてのインタラクティブ要素で一貫性のあるフォーカススタイル
 * 検証方法: Tabキーでフォーカス遷移時、アウトライン/シャドウが滑らかに出現
 */

/* Focus Styles - Keyboard Navigation (WCAG AA準拠) */
/* Base transition for all focusable elements */
button,
input,
select,
textarea,
a,
[tabindex]:not([tabindex="-1"]),
.task-item,
.task-item__checkbox {
	transition: var(--transition-focus);
}

/* Universal focus style */
*:focus-visible {
	outline: var(--focus-outline-width) solid var(--color-focus);
	outline-offset: var(--focus-outline-offset);
	border-radius: var(--border-radius-sm);
}

/* Task item focus - enhanced visibility */
.task-item:focus-visible {
	outline: var(--focus-outline-width) solid var(--color-focus);
	outline-offset: var(--focus-outline-offset);
	box-shadow: 0 0 0 4px rgba(var(--interactive-accent-rgb), 0.1);
}

/* Checkbox focus - stronger highlight */
.task-item__checkbox:focus-visible {
	outline: var(--focus-outline-width) solid var(--color-focus);
	outline-offset: var(--focus-outline-offset);
	box-shadow: 0 0 0 4px rgba(var(--interactive-accent-rgb), 0.2);
}

/* Form elements focus */
button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
	outline: var(--focus-outline-width) solid var(--color-focus);
	outline-offset: var(--focus-outline-offset);
}

/* Modal form label */
.modal-form-label {
	display: block;
	margin-top: 10px;
}

/* ============================================
 * Modal - Refined Design System
 * ============================================
 * RED PHASE - Subtask 1: モーダル角丸デザイン
 * 検証基準:
 * - .modalクラスにborder-radiusが12-16pxで設定される
 * - CSS変数--modal-border-radius定義（12px）
 * - 角丸がApple-likeで統一感がある
 * 検証方法: モーダル表示時、角が滑らかに丸まっている
 */

/* Modal Container - Apple-like rounded corners */
.modal {
	border-radius: var(--modal-border-radius);
}

/* ============================================
 * Button Hover Effects - Interactive Feedback
 * ============================================ */

/* Base button transitions for smooth interactions */
button {
	transition: var(--transition-interactive);
	cursor: pointer;
}

/* Hover state - subtle scale and shadow */
button:hover {
	transform: scale(1.05);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* Active state - pressed feedback */
button:active {
	transform: scale(0.98);
}
