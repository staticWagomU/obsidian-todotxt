# Sprint 1 振り返り

## Sprint概要

- **Sprint番号**: 1
- **PBI**: PBI-001 - ".txt/.todotxtファイルを専用ビューで開く"
- **状態**: 完了
- **検証結果**: 合格

## うまくいったこと (Worked Well)

1. **TDDアプローチ(Red-Green-Refactor)により、テストファーストで確実に機能を実装できた**
   - 各機能について、先にテストを書いてから実装する流れが定着
   - 仕様が明確になり、実装の方向性に迷いがなかった

2. **受け入れ基準に対応した具体的な検証コマンドにより、完了判定が明確だった**
   - `pnpm vitest run --grep 'txt extension'` などの具体的なコマンドがあり、完了の判断が客観的
   - 手動確認の必要がなく、自動化された品質保証ができた

3. **3つのサブタスク(TodotxtView登録、.txt拡張子、.todotxt拡張子)への分割が適切で、段階的に実装できた**
   - 各サブタスクが独立しており、並行作業や順次作業の選択が可能
   - 1つずつ完了させることで、進捗が可視化された

4. **Obsidianプラグインの標準パターン(TextFileView継承、registerView、registerExtensions)を正しく適用できた**
   - 公式のベストプラクティスに従い、保守性の高いコードになった
   - Obsidianのライフサイクルに沿った実装で、問題が発生しにくい

5. **モックを活用したテスト設計により、プラグインライフサイクルを外部依存なしで検証できた**
   - Obsidian本体がなくてもテストが実行可能
   - CI/CDでの自動テストが容易

6. **Definition of Done(テスト、Lint、型チェック、ビルド)を全て満たし、品質を担保できた**
   - 複数の観点から品質をチェックし、リグレッションを防止
   - リリース可能な状態を維持

## 改善すべきこと (To Improve)

1. **テストファイルのモック設定が冗長になりがち(beforeEachでの初期化、各テストでのスパイ設定)**
   - 同じようなモックの初期化コードが繰り返されている
   - テストコードの可読性と保守性に影響

2. **テストのスパイ実装がやや手動的で、vitestのモック機能をもっと活用できる可能性がある**
   - カスタムスパイオブジェクトを手動で作成している
   - vitestの標準機能を使えば、より簡潔に書ける

3. **subtaskの粒度が適切だったが、より小さく分割するべきか判断基準が不明確**
   - 今回は3つのサブタスクで適切だったが、次回も同じ基準でよいか不明
   - サブタスクの大きさの目安が必要

4. **コミットメッセージとsubtaskの対応関係が暗黙的で、追跡しづらい**
   - scrum.tsのsubtasks配列にcommitsフィールドがあるが、活用されていない
   - どのコミットがどのサブタスクに対応するか不明確

## アクション項目 (Actions for Next Sprint)

1. **次のスプリントでは、共通のモックヘルパー関数を作成してテストコードの重複を削減する**
   - `src/__tests__/helpers/` などにモック作成ヘルパーを配置
   - テストコードの見通しを良くする

2. **vitestのvi.mock()やvi.spyOn()を積極的に活用し、モックコードをより宣言的に記述する**
   - 公式ドキュメントを参照し、ベストプラクティスを学習
   - より表現力の高いテストコードを書く

3. **subtaskは「1つのテストファイルに1つのdescribeブロックを追加する単位」を基準に分割する**
   - サブタスクの粒度に関する具体的なガイドラインを設定
   - チーム内で基準を共有し、一貫性を保つ

4. **各subtaskのcommits配列にphaseとmessageを記録し、実際のgitコミットとの対応を明確にする**
   - scrum.tsのcommits配列を活用
   - トレーサビリティを向上させる

---

*このドキュメントはSprint Retrospectiveイベントの結果として生成されました。*
*振り返りの内容は `/Users/wagomu/dev/github.com/staticWagomU/obsidian-todotxt/scrum.ts` の `retrospectives` 配列に記録されています。*
