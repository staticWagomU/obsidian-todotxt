/*
 * Obsidian Todo.txt Plugin Styles
 */

/* ============================================
 * CSS Variables - Design System
 * ============================================
 * Apple-likeミニマルデザインのための統一変数システム
 * Obsidian標準変数を参照してテーマ自動対応
 * グループ化: Typography / Colors / Animation / Layout
 */

:root {
	/* ==================== Typography ==================== */
	/* 3-tier hierarchy for visual hierarchy */
	--font-size-large: 16px;   /* タイトル・見出し */
	--font-size-medium: 14px;  /* 本文 */
	--font-size-small: 12px;   /* 補助テキスト */

	--line-height-large: 1.5;
	--line-height-medium: 1.4;
	--line-height-small: 1.3;

	/* ==================== Colors ==================== */
	/* Obsidian標準変数を参照 - ダーク/ライトモード自動対応 */
	--color-background: var(--background-primary);
	--color-text: var(--text-normal);
	--color-border: var(--background-modifier-border);
	--color-focus: var(--interactive-accent);
	--color-hover: var(--background-modifier-hover);

	/* ==================== Animation ==================== */
	/* Apple-like smooth transitions - 150ms基準 */
	--transition-fast: all 0.1s ease;      /* 瞬時フィードバック */
	--transition-default: all 0.15s ease;  /* 標準アニメーション */
	--transition-slow: all 0.3s ease;      /* ゆったりアニメーション */

	/* Specific property transitions for performance */
	--transition-bg: background-color 0.15s ease;
	--transition-transform: transform 0.15s ease;
	--transition-shadow: box-shadow 0.15s ease;
	--transition-interactive: transform 0.15s ease, box-shadow 0.15s ease;
	--transition-focus: outline 0.15s ease, box-shadow 0.15s ease;

	/* Animation durations */
	--duration-fast: 0.1s;
	--duration-default: 0.15s;
	--duration-slow: 0.3s;
	--duration-checkmark: 0.2s;

	/* ==================== Layout ==================== */
	/* Spacing Scale - 4px基準の8の倍数システム */
	--spacing-xs: 4px;
	--spacing-sm: 8px;
	--spacing-md: 12px;
	--spacing-lg: 16px;
	--spacing-xl: 24px;

	/* Component Dimensions */
	--checkbox-size: 18px;

	/* Border Radius - 3-tier hierarchy */
	--border-radius-sm: 4px;   /* チェックボックス・小要素 */
	--border-radius-md: 6px;   /* タスクアイテム・カード */
	--border-radius-lg: 12px;  /* モーダル・大型コンテナ */

	/* Modal Effects */
	--modal-backdrop-blur: 8px;  /* Apple-like背景ぼかし */
	--input-border-width: 1px;   /* ミニマル入力フィールド */
	--input-padding: 8px 12px;   /* 快適な入力領域 */

	/* Focus & Accessibility */
	--focus-outline-width: 2px;
	--focus-outline-offset: 2px;
}

/* ============================================
 * Task List - BEM Classes & Spacing
 * ============================================
 * RED PHASE - 検証基準:
 * - .task-itemクラス: padding 12px 16px
 * - タスク間マージン: 16px以上
 * - BEM命名規則: .block__element--modifier
 * - スペーシングユーティリティクラス
 * 検証方法: クラス定義とスペーシング値の確認
 */

/* Task Item - BEM Block */
.task-item {
	padding: 12px 16px;
	margin-bottom: 16px;
	border-radius: 6px;
	transition: var(--transition-bg);
}

/* Hover Animation - Smooth background transition */
.task-item:hover {
	background-color: var(--color-hover);
}

.task-item:last-child {
	margin-bottom: 0;
}

/* Task Item Elements - BEM */
.task-item__text {
	font-size: var(--font-size-medium);
	line-height: var(--line-height-medium);
}

.task-item__meta {
	font-size: var(--font-size-small);
	line-height: var(--line-height-small);
	opacity: 0.7;
}

/* Task Item Modifiers - BEM */
.task-item--completed {
	text-decoration: line-through;
	opacity: 0.6;
}

/* Legacy class support - to be migrated */
.completed {
	text-decoration: line-through;
	opacity: 0.6;
}

/* ============================================
 * Spacing Utilities
 * ============================================ */
.u-spacing-sm {
	margin-bottom: 8px;
}

.u-spacing-md {
	margin-bottom: 16px;
}

.u-spacing-lg {
	margin-bottom: 24px;
}

/* ============================================
 * Priority Badge - BEM Pattern
 * ============================================ */
.priority {
	font-weight: bold;
	margin-right: 0.5em;
	padding: 0.1em 0.3em;
	border-radius: 3px;
}

/* Priority Level Modifiers - Refactored to BEM pattern */
.priority--A {
	color: #fff;
	background-color: #e53935;
}

.priority--B {
	color: #fff;
	background-color: #fb8c00;
}

.priority--C {
	color: #000;
	background-color: #ffeb3b;
}

.priority--D,
.priority--E,
.priority--F,
.priority--G,
.priority--H,
.priority--I,
.priority--J,
.priority--K,
.priority--L,
.priority--M,
.priority--N,
.priority--O,
.priority--P,
.priority--Q,
.priority--R,
.priority--S,
.priority--T,
.priority--U,
.priority--V,
.priority--W,
.priority--X,
.priority--Y,
.priority--Z {
	color: #fff;
	background-color: #1e88e5;
}

/* Legacy support - to be migrated to BEM */
.priority-A { color: #fff; background-color: #e53935; }
.priority-B { color: #fff; background-color: #fb8c00; }
.priority-C { color: #000; background-color: #ffeb3b; }
.priority-D,
.priority-E,
.priority-F,
.priority-G,
.priority-H,
.priority-I,
.priority-J,
.priority-K,
.priority-L,
.priority-M,
.priority-N,
.priority-O,
.priority-P,
.priority-Q,
.priority-R,
.priority-S,
.priority-T,
.priority-U,
.priority-V,
.priority-W,
.priority-X,
.priority-Y,
.priority-Z { color: #fff; background-color: #1e88e5; }

/* ============================================
 * Checkbox - Custom Style & Animation
 * ============================================
 * RED PHASE - 検証基準（Sprint 40実装済み）:
 * - .task-item__checkboxクラス定義
 * - border-radius適用（角丸）
 * - transition: all 0.15s ease適用
 * - ホバー効果とチェック時アニメーション
 * - Obsidian標準スタイルとの調和
 * 検証方法: クラス定義とアニメーション動作の確認
 *
 * RED PHASE - Subtask 4: チェックマーク完了アニメーション
 * 追加検証基準:
 * - @keyframesでチェックマーク出現アニメーション定義
 * - スケール変化（0.5 → 1）とフェードイン（opacity 0 → 1）
 * - アニメーション時間200-300ms
 * - ease-out または bounce効果で自然な出現
 * 検証方法: チェックボックスクリック時、チェックマークが滑らかに出現
 */

/* Checkbox - BEM Element with CSS Variables */
.task-item__checkbox {
	appearance: none;
	width: var(--checkbox-size);
	height: var(--checkbox-size);
	border: 2px solid var(--color-border);
	border-radius: var(--border-radius-sm);
	margin-right: var(--spacing-md);
	cursor: pointer;
	transition: var(--transition-default);
	flex-shrink: 0;
	position: relative;
}

.task-item__checkbox:hover {
	border-color: var(--color-focus);
	transform: scale(1.05);
	box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb), 0.1);
}

.task-item__checkbox:checked {
	background-color: var(--color-focus);
	border-color: var(--color-focus);
}

.task-item__checkbox:checked::after {
	content: '✓';
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	color: white;
	font-size: 14px;
	font-weight: bold;
	line-height: 1;
	animation: checkmarkAppear var(--duration-checkmark) ease-out;
}

/* Checkmark appearance animation */
@keyframes checkmarkAppear {
	0% {
		opacity: 0;
		transform: translate(-50%, -50%) scale(0.5);
	}
	50% {
		transform: translate(-50%, -50%) scale(1.1);
	}
	100% {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1);
	}
}

/* ============================================
 * Accessibility & Theme Support
 * ============================================
 * RED PHASE - 検証基準（Sprint 40実装済み）:
 * - :focus-visibleスタイル定義（すべてのインタラクティブ要素）
 * - キーボードナビゲーションで視覚的フィードバック
 * - CSS変数でダーク/ライトモード両対応
 * - コントラスト比確保（WCAG AA基準）
 * - アウトライン・シャドウでフォーカス明示
 * 検証方法: Tabキーナビゲーション、両モードでの視認性確認
 *
 * RED PHASE - Subtask 3: フォーカスハイライト強化
 * 追加検証基準:
 * - フォーカス遷移に滑らかなアニメーション追加
 * - :focus-visibleでのoutline/box-shadowにtransition適用
 * - すべてのインタラクティブ要素で一貫性のあるフォーカススタイル
 * 検証方法: Tabキーでフォーカス遷移時、アウトライン/シャドウが滑らかに出現
 */

/* Focus Styles - Keyboard Navigation (WCAG AA準拠) */
/* Base transition for all focusable elements */
button,
input,
select,
textarea,
a,
[tabindex]:not([tabindex="-1"]),
.task-item,
.task-item__checkbox {
	transition: var(--transition-focus);
}

/* Universal focus style */
*:focus-visible {
	outline: var(--focus-outline-width) solid var(--color-focus);
	outline-offset: var(--focus-outline-offset);
	border-radius: var(--border-radius-sm);
}

/* Task item focus - enhanced visibility */
.task-item:focus-visible {
	outline: var(--focus-outline-width) solid var(--color-focus);
	outline-offset: var(--focus-outline-offset);
	box-shadow: 0 0 0 4px rgba(var(--interactive-accent-rgb), 0.1);
}

/* Checkbox focus - stronger highlight */
.task-item__checkbox:focus-visible {
	outline: var(--focus-outline-width) solid var(--color-focus);
	outline-offset: var(--focus-outline-offset);
	box-shadow: 0 0 0 4px rgba(var(--interactive-accent-rgb), 0.2);
}

/* Form elements focus */
button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
	outline: var(--focus-outline-width) solid var(--color-focus);
	outline-offset: var(--focus-outline-offset);
}

/* Modal form label */
.modal-form-label {
	display: block;
	margin-top: 10px;
}

/* ============================================
 * Modal - Refined Design System
 * ============================================
 * RED PHASE - Subtask 1: モーダル角丸デザイン
 * 検証基準:
 * - .modalクラスにborder-radiusが12-16pxで設定される
 * - CSS変数--modal-border-radius定義（12px）
 * - 角丸がApple-likeで統一感がある
 * 検証方法: モーダル表示時、角が滑らかに丸まっている
 */

/* Modal Container - Apple-like rounded corners */
.modal {
	border-radius: var(--border-radius-lg);
}

/* ============================================
 * Modal Backdrop - Blur Effect
 * ============================================
 * RED PHASE - Subtask 2: モーダル背景ブラー効果
 * 検証基準:
 * - .modal-containerまたは.modal::backdropにbackdrop-filter: blur()適用
 * - CSS変数--modal-backdrop-blur定義（8-12px推奨）
 * - 背景がぼかされモーダルにフォーカスが集まる
 * 検証方法: モーダル表示時、背景コンテンツがぼかされる
 */

/* Modal backdrop with blur effect - Apple-like focus */
.modal-container {
	backdrop-filter: blur(var(--modal-backdrop-blur));
	-webkit-backdrop-filter: blur(var(--modal-backdrop-blur)); /* Safari support */
}

/* Respect user's reduced motion preference */
@media (prefers-reduced-motion: reduce) {
	.modal-container {
		backdrop-filter: none;
		-webkit-backdrop-filter: none;
	}
}

/* ============================================
 * Modal Input Fields - Flat Design
 * ============================================
 * RED PHASE - Subtask 3: フラットデザイン入力フィールド
 * 検証基準:
 * - .modal input/.modal textareaにborder-width 1px以下またはボーダーレス
 * - CSS変数--input-border-width定義（0または1px）
 * - ミニマルで洗練されたフォーム外観
 * 検証方法: モーダル内の入力フィールドが細いボーダーまたはボーダーレス
 */

/* Modal input fields - flat minimal design */
.modal input[type="text"],
.modal input[type="date"],
.modal textarea,
.modal select {
	border: var(--input-border-width) solid var(--color-border);
	padding: var(--input-padding);
	border-radius: var(--border-radius-sm);
	background-color: var(--color-background);
	color: var(--color-text);
	transition: var(--transition-default);
	font-size: var(--font-size-medium);
	line-height: var(--line-height-medium);
}

/* Subtle hover effect */
.modal input[type="text"]:hover,
.modal input[type="date"]:hover,
.modal textarea:hover,
.modal select:hover {
	border-color: var(--color-focus);
	background-color: var(--color-hover);
}

/* ============================================
 * Modal Buttons - Primary Action Design
 * ============================================
 * RED PHASE - Subtask 4: プライマリカラー保存ボタン
 * 検証基準:
 * - .modal .mod-cta（Obsidianプライマリボタンクラス）にアクセントカラー適用
 * - --interactive-accentを活用した目立つデザイン
 * - ホバー/アクティブ状態でのフィードバック強化
 * 検証方法: モーダル内の保存ボタンがアクセントカラーで表示される
 */

/* Primary button - accent color for save action */
.modal .mod-cta {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	padding: var(--input-padding);
	border-radius: var(--border-radius-sm);
	font-weight: 500;
	transition: var(--transition-interactive);
}

/* Enhanced hover effect for primary button */
.modal .mod-cta:hover {
	background-color: var(--interactive-accent-hover);
	transform: scale(1.05);
	box-shadow: 0 2px 8px rgba(var(--interactive-accent-rgb), 0.3);
}

/* Active state feedback */
.modal .mod-cta:active {
	transform: scale(0.98);
}

/* Secondary button - subtle design for cancel action */
.modal button:not(.mod-cta) {
	background-color: transparent;
	color: var(--text-muted);
	border: var(--input-border-width) solid var(--color-border);
	padding: var(--input-padding);
	border-radius: var(--border-radius-sm);
	transition: var(--transition-interactive);
}

/* Secondary button hover */
.modal button:not(.mod-cta):hover {
	background-color: var(--color-hover);
	border-color: var(--color-focus);
	color: var(--color-text);
}

/* ============================================
 * Button Hover Effects - Interactive Feedback
 * ============================================ */

/* Base button transitions for smooth interactions */
button {
	transition: var(--transition-interactive);
	cursor: pointer;
}

/* Active state - pressed feedback */
button:active {
	transform: scale(0.98);
}

/* ============================================
 * Apple-style Task List Container
 * ============================================ */
.todotxt-view {
	padding: var(--spacing-xl);
	max-width: 100%;
}

.todotxt-view ul {
	list-style: none;
	padding: 0;
	margin: 0;
	/* FABボタンと重ならないよう下部にスペースを確保 */
	padding-bottom: 100px;
}

/* ============================================
 * Apple-style Control Bar
 * ============================================
 * セグメントコントロール風のモダンなフィルターバー
 * 2行レイアウト: 上段（フィルター類）、下段（検索）
 */
.control-bar {
	display: flex;
	flex-direction: column;
	gap: var(--spacing-sm);
	padding: var(--spacing-md) var(--spacing-lg);
	margin-bottom: var(--spacing-xl);
	background: var(--background-secondary);
	border-radius: var(--border-radius-lg);
}

/* 上段: セレクトボックスとボタンを横並び */
.control-bar-row {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	gap: var(--spacing-sm);
}

/* 検索ボックスは全幅 */
.control-bar .search-box {
	width: 100%;
}

/* Apple-style segmented control for dropdowns */
.control-bar select {
	appearance: none;
	-webkit-appearance: none;
	padding: var(--spacing-sm) var(--spacing-lg);
	padding-right: 32px;
	border: 1px solid var(--background-modifier-border);
	border-radius: var(--border-radius-md);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: var(--font-size-small);
	font-weight: 500;
	cursor: pointer;
	transition: var(--transition-default);
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
	background-repeat: no-repeat;
	background-position: right 10px center;
}

.control-bar select:hover {
	background-color: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.control-bar select:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

/* Apple-style search box */
.control-bar .search-box {
	flex: 1;
	min-width: 180px;
	padding: var(--spacing-sm) var(--spacing-lg);
	border: 1px solid var(--background-modifier-border);
	border-radius: 20px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: var(--font-size-small);
	transition: var(--transition-default);
}

.control-bar .search-box::placeholder {
	color: var(--text-muted);
}

.control-bar .search-box:hover {
	border-color: var(--interactive-accent);
}

.control-bar .search-box:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

/* ============================================
 * Apple-style Floating Action Buttons
 * ============================================
 * FABコンテナ: AI追加ボタン + メイン追加ボタンを右下に配置
 */
.fab-container {
	position: fixed;
	bottom: 24px;
	right: 24px;
	display: flex;
	align-items: center;
	gap: var(--spacing-md);
	z-index: 100;
}

/* メイン追加ボタン（+） */
.add-task-button {
	width: 56px;
	height: 56px;
	border-radius: 50%;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	font-size: 28px;
	font-weight: 300;
	border: none;
	cursor: pointer;
	box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
	transition: var(--transition-default);
	display: flex;
	align-items: center;
	justify-content: center;
}

.add-task-button:hover {
	transform: scale(1.1);
	box-shadow: 0 6px 24px rgba(0, 0, 0, 0.25);
}

.add-task-button:active {
	transform: scale(0.95);
}

/* AI追加ボタン（✨） - FAB左隣の小さめボタン */
.ai-add-task-button {
	width: 44px;
	height: 44px;
	border-radius: 50%;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 18px;
	border: 1px solid var(--background-modifier-border);
	cursor: pointer;
	box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
	transition: var(--transition-default);
	display: flex;
	align-items: center;
	justify-content: center;
}

.ai-add-task-button:hover {
	transform: scale(1.1);
	box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
	border-color: var(--interactive-accent);
	background: var(--background-modifier-hover);
}

.ai-add-task-button:active {
	transform: scale(0.95);
}

/* ============================================
 * Archive Button - Control Bar Style
 * ============================================
 * コントロールバー内のツールバー風ボタン
 */
.archive-button {
	padding: var(--spacing-sm) var(--spacing-lg);
	border: 1px solid var(--background-modifier-border);
	border-radius: var(--border-radius-md);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: var(--font-size-small);
	font-weight: 500;
	cursor: pointer;
	transition: var(--transition-default);
	white-space: nowrap;
}

.archive-button:hover:not(:disabled) {
	background-color: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.archive-button:disabled {
	opacity: 0.4;
	cursor: not-allowed;
}

/* ============================================
 * Apple-style Task Card
 * ============================================
 * フラットデザインで各タスクを明確に分離（シャドウ控えめ）
 */
.todotxt-view ul > li:not(.group-header) {
	display: flex;
	align-items: center;
	gap: var(--spacing-md);
	padding: var(--spacing-lg);
	margin-bottom: var(--spacing-sm);
	background: var(--background-primary);
	border-radius: var(--border-radius-md);
	border: 1px solid var(--background-modifier-border);
	transition: var(--transition-default);
	position: relative;
}

.todotxt-view ul > li:not(.group-header):hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

/* Hide action buttons by default, show on hover */
.todotxt-view ul > li:not(.group-header) .edit-task-button,
.todotxt-view ul > li:not(.group-header) .delete-task-button {
	opacity: 0;
	transition: var(--transition-default);
}

.todotxt-view ul > li:not(.group-header):hover .edit-task-button,
.todotxt-view ul > li:not(.group-header):hover .delete-task-button {
	opacity: 1;
}

/* ============================================
 * Apple-style Checkbox
 * ============================================ */
.task-checkbox {
	appearance: none;
	-webkit-appearance: none;
	width: 22px;
	height: 22px;
	border: 2px solid var(--text-muted);
	border-radius: 50%;
	cursor: pointer;
	transition: var(--transition-default);
	flex-shrink: 0;
	position: relative;
}

.task-checkbox:hover {
	border-color: var(--interactive-accent);
	background: rgba(var(--interactive-accent-rgb), 0.1);
}

.task-checkbox:checked {
	background: var(--interactive-accent);
	border-color: var(--interactive-accent);
}

.task-checkbox:checked::after {
	content: '✓';
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	color: var(--text-on-accent);
	font-size: 13px;
	font-weight: bold;
	animation: checkmarkAppear 0.2s ease-out;
}

/* ============================================
 * Apple-style Priority Badge
 * ============================================
 * 円形のミニマルな優先度インジケーター
 */
.priority {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 24px;
	height: 24px;
	border-radius: 50%;
	font-size: 11px;
	font-weight: 600;
	flex-shrink: 0;
	margin-right: var(--spacing-sm);
}

.priority-A {
	background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
	color: white;
	box-shadow: 0 2px 8px rgba(238, 90, 90, 0.3);
}

.priority-B {
	background: linear-gradient(135deg, #ffa94d, #ff922b);
	color: white;
	box-shadow: 0 2px 8px rgba(255, 146, 43, 0.3);
}

.priority-C {
	background: linear-gradient(135deg, #ffe066, #fcc419);
	color: #333;
	box-shadow: 0 2px 8px rgba(252, 196, 25, 0.3);
}

.priority-D, .priority-E, .priority-F, .priority-G, .priority-H,
.priority-I, .priority-J, .priority-K, .priority-L, .priority-M,
.priority-N, .priority-O, .priority-P, .priority-Q, .priority-R,
.priority-S, .priority-T, .priority-U, .priority-V, .priority-W,
.priority-X, .priority-Y, .priority-Z {
	background: linear-gradient(135deg, #74c0fc, #4dabf7);
	color: white;
	box-shadow: 0 2px 8px rgba(77, 171, 247, 0.3);
}

/* ============================================
 * Apple-style Group Header
 * ============================================ */
.group-header {
	font-size: var(--font-size-large);
	font-weight: 600;
	color: var(--text-normal);
	padding: var(--spacing-lg) var(--spacing-sm);
	margin-top: var(--spacing-xl);
	margin-bottom: var(--spacing-sm);
	border-bottom: 2px solid var(--interactive-accent);
	background: transparent !important;
	box-shadow: none !important;
}

.group-header:first-child {
	margin-top: 0;
}

/* ============================================
 * Apple-style Date & Tag Badges
 * ============================================
 * ピルシェイプのエレガントなバッジ
 */
.due-date {
	display: inline-flex;
	align-items: center;
	padding: 2px 10px;
	border-radius: 12px;
	font-size: var(--font-size-small);
	font-weight: 500;
	background: var(--background-secondary);
	color: var(--text-muted);
	margin-left: var(--spacing-sm);
}

/* Overdue style */
.due-date[style*="color: red"],
.due-date[style*="background-color: #"] {
	background: linear-gradient(135deg, #ffe3e3, #ffc9c9) !important;
	color: #c92a2a !important;
}

/* Recurrence icon styling */
.recurrence-icon {
	font-size: 14px;
	margin-left: var(--spacing-xs);
	opacity: 0.7;
}

/* ============================================
 * Apple-style Action Buttons - Icon Style
 * ============================================
 * ミニマルなアイコンボタン（ホバー時に色変化）
 */
.edit-task-button,
.delete-task-button {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: 4px;
	padding: 6px 10px;
	border: none;
	border-radius: var(--border-radius-sm);
	font-size: var(--font-size-small);
	font-weight: 500;
	cursor: pointer;
	transition: var(--transition-default);
	background: transparent;
	color: var(--text-muted);
}

/* 編集ボタン: ペンアイコンスタイル */
.edit-task-button {
	margin-left: auto;
}

.edit-task-button::before {
	content: "✎";
	font-size: 12px;
}

.edit-task-button:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	transform: none;
	box-shadow: none;
}

/* 削除ボタン: ゴミ箱アイコンスタイル */
.delete-task-button::before {
	content: "✕";
	font-size: 11px;
	font-weight: bold;
}

.delete-task-button:hover {
	background: rgba(220, 53, 69, 0.1);
	color: #dc3545;
	transform: none;
	box-shadow: none;
}

/* ============================================
 * Completed Task Style
 * ============================================ */
.todotxt-view ul > li.completed {
	opacity: 0.5;
}

.todotxt-view ul > li.completed:hover {
	opacity: 0.7;
}

/* ============================================
 * Internal/External Link Styles
 * ============================================ */
.internal-link {
	background: var(--background-secondary);
	color: var(--interactive-accent);
	border: none;
	padding: 2px 8px;
	border-radius: 4px;
	font-size: var(--font-size-small);
	cursor: pointer;
	transition: var(--transition-default);
}

.internal-link:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	transform: none;
	box-shadow: none;
}

.external-link {
	color: var(--interactive-accent);
	text-decoration: none;
	transition: var(--transition-default);
}

.external-link:hover {
	text-decoration: underline;
}

/* ============================================
 * Dark Mode Refinements
 * ============================================ */
.theme-dark .control-bar {
	background: rgba(255, 255, 255, 0.05);
}

.theme-dark .control-bar select,
.theme-dark .control-bar .search-box {
	background: rgba(255, 255, 255, 0.08);
	border-color: rgba(255, 255, 255, 0.1);
}

.theme-dark .todotxt-view ul > li:not(.group-header) {
	background: rgba(255, 255, 255, 0.03);
	border-color: rgba(255, 255, 255, 0.08);
}

.theme-dark .todotxt-view ul > li:not(.group-header):hover {
	background: rgba(255, 255, 255, 0.06);
}

/* ============================================
 * Modal Layout - Improved Form Design
 * ============================================
 * 横並びレイアウトとテキスト見切れ対応
 */

/* モーダルの最小幅を確保 */
.modal {
	min-width: 400px;
	max-width: 560px;
}

/* タスク説明入力フィールド - 幅100%で見切れ防止 */
.modal .task-description-input {
	width: 100%;
	box-sizing: border-box;
}

/* 日付フィールドの横並び配置 */
.modal-date-row {
	display: flex;
	gap: var(--spacing-lg);
	margin-top: var(--spacing-md);
}

.modal-date-row .modal-date-field {
	flex: 1;
	min-width: 0;
}

.modal-date-row .modal-date-field label {
	display: block;
	margin-bottom: var(--spacing-xs);
	font-size: var(--font-size-small);
	color: var(--text-muted);
}

.modal-date-row .modal-date-field input {
	width: 100%;
	box-sizing: border-box;
}

/* プロジェクト/コンテキストの横並び配置 */
.modal-tags-row {
	display: flex;
	gap: var(--spacing-lg);
	margin-top: var(--spacing-md);
}

.modal-tags-row .modal-tag-field {
	flex: 1;
	min-width: 0;
}

.modal-tags-row .modal-tag-field label {
	display: block;
	margin-bottom: var(--spacing-xs);
	font-size: var(--font-size-small);
	color: var(--text-muted);
}

/* マルチセレクトの高さを制限して見切れ防止 */
.modal-tags-row .modal-tag-field select {
	width: 100%;
	box-sizing: border-box;
	max-height: 120px;
	overflow-y: auto;
}

/* プレビューエリア - テキスト折り返し */
.modal .preview-area {
	background: var(--background-secondary);
	padding: var(--spacing-md);
	border-radius: var(--border-radius-sm);
	margin-top: var(--spacing-md);
	white-space: pre-wrap;
	word-break: break-all;
	font-family: var(--font-monospace);
	font-size: var(--font-size-small);
	max-height: 100px;
	overflow-y: auto;
}

/* 保存ボタンのスタイル強化 */
.modal .save-task-button {
	margin-top: var(--spacing-lg);
	padding: var(--spacing-sm) var(--spacing-xl);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: var(--border-radius-sm);
	font-weight: 500;
	cursor: pointer;
	transition: var(--transition-default);
}

.modal .save-task-button:hover {
	filter: brightness(1.1);
}

/* 優先度選択を上部に横並び */
.modal-header-row {
	display: flex;
	gap: var(--spacing-md);
	align-items: flex-end;
	margin-bottom: var(--spacing-md);
}

.modal-header-row .modal-task-field {
	flex: 1;
	min-width: 0;
}

.modal-header-row .modal-priority-field {
	flex-shrink: 0;
	width: 80px;
}

.modal-header-row label {
	display: block;
	margin-bottom: var(--spacing-xs);
	font-size: var(--font-size-small);
	color: var(--text-muted);
}

.modal-header-row input,
.modal-header-row select {
	width: 100%;
	box-sizing: border-box;
}

/* ============================================
 * Tag Chips UI - Gmail-like Tag Selection
 * ============================================
 * チップ/タグ形式のプロジェクト・コンテキスト選択UI
 * モバイル対応のタッチフレンドリーなデザイン
 */

/* チップコンテナ - Flexboxでチップを横並び */
.tag-chips {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	gap: 6px;
	padding: var(--spacing-sm);
	min-height: 44px; /* モバイルタッチ対応 */
	border: var(--input-border-width) solid var(--color-border);
	border-radius: var(--border-radius-sm);
	background-color: var(--color-background);
	cursor: text;
	transition: var(--transition-default);
}

.tag-chips:hover {
	border-color: var(--color-focus);
}

.tag-chips:focus-within {
	border-color: var(--color-focus);
	box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb), 0.1);
}

/* 個別チップ - ピル形状 */
.tag-chip {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	padding: 6px 10px;
	min-height: 28px; /* タッチしやすいサイズ */
	border-radius: 16px;
	font-size: var(--font-size-small);
	font-weight: 500;
	transition: var(--transition-default);
	cursor: default;
	user-select: none;
}

/* プロジェクトチップ (緑系) */
.tag-chip--project {
	background: linear-gradient(135deg, #d4edda, #c3e6cb);
	color: #155724;
}

/* コンテキストチップ (青系) */
.tag-chip--context {
	background: linear-gradient(135deg, #d1ecf1, #bee5eb);
	color: #0c5460;
}

/* チップホバー効果 */
.tag-chip:hover {
	filter: brightness(0.95);
}

/* 削除ボタン - タッチフレンドリー */
.tag-chip__remove {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 20px;
	height: 20px;
	min-width: 20px; /* 縮まないように */
	padding: 0;
	border: none;
	border-radius: 50%;
	background: rgba(0, 0, 0, 0.15);
	color: inherit;
	font-size: 12px;
	line-height: 1;
	cursor: pointer;
	transition: var(--transition-fast);
	box-shadow: none !important;
	transform: none;
}

.tag-chip__remove:hover {
	background: rgba(0, 0, 0, 0.3);
	box-shadow: none !important;
	transform: none;
}

.tag-chip__remove:active {
	box-shadow: none !important;
	transform: none;
}

.tag-chip__remove:focus-visible {
	outline: var(--focus-outline-width) solid var(--color-focus);
	outline-offset: 1px;
	box-shadow: none !important;
}

/* インライン入力欄 */
.tag-input--inline {
	flex: 1;
	min-width: 100px;
	padding: 6px 4px;
	border: none;
	background: transparent;
	font-size: var(--font-size-small);
	outline: none;
	color: var(--color-text);
}

.tag-input--inline::placeholder {
	color: var(--text-muted);
}

/* 候補ドロップダウン */
.tag-suggestions {
	position: absolute;
	top: 100%;
	left: 0;
	right: 0;
	z-index: 1000;
	max-height: 200px;
	overflow-y: auto;
	margin: 0;
	margin-top: 4px;
	padding: var(--spacing-xs);
	list-style: none;
	border: 1px solid var(--color-border);
	border-radius: var(--border-radius-sm);
	background-color: var(--background-primary);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.tag-suggestions[hidden] {
	display: none;
}

/* 候補アイテム - モバイルタップ対応 */
.tag-suggestion {
	padding: 12px 16px;
	min-height: 44px; /* タッチターゲット */
	border-radius: var(--border-radius-sm);
	font-size: var(--font-size-small);
	cursor: pointer;
	transition: var(--transition-fast);
	display: flex;
	align-items: center;
	box-sizing: border-box;
}

.tag-suggestion:hover,
.tag-suggestion--highlighted {
	background: var(--color-hover);
}

/* タグフィールドの相対位置（ドロップダウン用） */
.modal-tag-field {
	position: relative;
}

/* ============================================
 * Tag Chips - Dark Mode Support
 * ============================================ */

.theme-dark .tag-chip--project {
	background: linear-gradient(135deg, #2d5a3d, #3d7a4d);
	color: #b8e6cf;
}

.theme-dark .tag-chip--context {
	background: linear-gradient(135deg, #2d4a5a, #3d6a7a);
	color: #b8d8ea;
}

.theme-dark .tag-chip__remove {
	background: rgba(255, 255, 255, 0.2);
	box-shadow: none !important;
}

.theme-dark .tag-chip__remove:hover {
	background: rgba(255, 255, 255, 0.35);
	box-shadow: none !important;
}

.theme-dark .tag-chip__remove:active {
	box-shadow: none !important;
}

.theme-dark .tag-suggestions {
	background: var(--background-primary);
	border-color: rgba(255, 255, 255, 0.1);
	box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

/* ============================================
 * Tag Chips - Mobile Responsive
 * ============================================ */

@media (max-width: 768px) {
	/* モバイルで縦並びレイアウト */
	.modal-tags-row {
		flex-direction: column;
		gap: var(--spacing-lg);
	}

	/* チップコンテナを大きく */
	.tag-chips {
		min-height: 48px;
		padding: var(--spacing-md);
	}

	/* チップを大きく */
	.tag-chip {
		padding: 8px 12px;
		min-height: 32px;
		font-size: 14px;
	}

	/* 削除ボタンを大きく */
	.tag-chip__remove {
		width: 24px;
		height: 24px;
		min-width: 24px;
		font-size: 14px;
	}

	/* 候補リストを画面の半分まで */
	.tag-suggestions {
		max-height: 50vh;
	}

	/* 候補アイテムを大きく */
	.tag-suggestion {
		padding: 14px 16px;
		min-height: 48px;
		font-size: 15px;
	}
}

/* ============================================
 * Tag Chips - Accessibility
 * ============================================ */

/* フォーカス表示 */
.tag-chip:focus-visible {
	outline: var(--focus-outline-width) solid var(--color-focus);
	outline-offset: 2px;
}

.tag-suggestion:focus-visible {
	outline: var(--focus-outline-width) solid var(--color-focus);
	outline-offset: -2px;
}

/* Reduced motion対応 */
@media (prefers-reduced-motion: reduce) {
	.tag-chip,
	.tag-chip__remove,
	.tag-chips,
	.tag-suggestions,
	.tag-suggestion {
		transition: none;
	}
}

/* ============================================
 * Mobile Responsive - Enhanced Support
 * ============================================
 * 横幅の狭いモバイルデバイス向けの最適化
 * ブレークポイント: 768px (タブレット), 480px (スマホ)
 */

/* --------------------------------------------
 * Tablet Breakpoint (max-width: 768px)
 * -------------------------------------------- */
@media (max-width: 768px) {
	/* コンテナのパディング調整 */
	.todotxt-view {
		padding: var(--spacing-lg);
	}

	/* コントロールバー - タブレットではパディング狭く */
	.control-bar {
		padding: var(--spacing-md);
	}

	/* フィルター行を折り返し可能に */
	.control-bar-row {
		flex-wrap: wrap;
	}

	/* FABコンテナの位置調整（指が届きやすい位置） */
	.fab-container {
		bottom: 20px;
		right: 20px;
		gap: var(--spacing-sm);
	}

	.add-task-button {
		width: 52px;
		height: 52px;
		font-size: 26px;
	}

	.ai-add-task-button {
		width: 40px;
		height: 40px;
		font-size: 16px;
	}

	/* タスクアイテム - モバイルで縦積みレイアウト */
	.todotxt-view ul > li:not(.group-header) {
		padding: var(--spacing-md);
		flex-direction: column;
		align-items: stretch;
	}

	/* モバイルでは操作ボタンを常時表示 */
	.todotxt-view ul > li:not(.group-header) .edit-task-button,
	.todotxt-view ul > li:not(.group-header) .delete-task-button {
		opacity: 1;
	}

	/* モーダルの幅調整 */
	.modal {
		min-width: unset;
		max-width: calc(100vw - 32px);
		width: calc(100vw - 32px);
		margin: 16px;
	}

	/* 日付行を縦積みに */
	.modal-date-row {
		flex-direction: column;
		gap: var(--spacing-md);
	}

	/* ヘッダー行を縦積みに */
	.modal-header-row {
		flex-direction: column;
		align-items: stretch;
	}

	.modal-header-row .modal-priority-field {
		width: 100%;
	}
}

/* --------------------------------------------
 * Small Phone Breakpoint (max-width: 480px)
 * -------------------------------------------- */
@media (max-width: 480px) {
	/* さらに小さいパディング */
	.todotxt-view {
		padding: var(--spacing-md);
	}

	/* コントロールバー - すべて縦積み */
	.control-bar {
		padding: var(--spacing-sm);
	}

	.control-bar select {
		width: 100%;
		min-width: unset;
		padding: var(--spacing-md) var(--spacing-lg);
		padding-right: 36px;
		font-size: var(--font-size-medium);
		min-height: 44px; /* タッチターゲット */
	}

	.control-bar .search-box {
		padding: var(--spacing-md) var(--spacing-lg);
		font-size: var(--font-size-medium);
		min-height: 44px;
	}

	/* FABコンテナをさらに調整 */
	.fab-container {
		bottom: 16px;
		right: 16px;
	}

	.add-task-button {
		width: 56px;
		height: 56px;
		font-size: 28px;
		/* 影を強めてタップ領域を明確に */
		box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
	}

	.ai-add-task-button {
		width: 44px;
		height: 44px;
		font-size: 18px;
		box-shadow: 0 2px 16px rgba(0, 0, 0, 0.25);
	}

	/* タスクアイテム - コンパクト化 */
	.todotxt-view ul > li:not(.group-header) {
		padding: var(--spacing-sm) var(--spacing-md);
		gap: var(--spacing-sm);
	}

	/* チェックボックスを大きく（タッチしやすく） */
	.task-checkbox {
		width: 28px;
		height: 28px;
	}

	.task-checkbox:checked::after {
		font-size: 16px;
	}

	/* 優先度バッジ調整 */
	.priority {
		width: 22px;
		height: 22px;
		font-size: 10px;
	}

	/* 操作ボタンを大きく */
	.edit-task-button,
	.delete-task-button {
		padding: 10px 14px;
		font-size: var(--font-size-medium);
		min-height: 44px;
	}

	.edit-task-button::before,
	.delete-task-button::before {
		font-size: 16px;
	}

	/* グループヘッダー調整 */
	.group-header {
		padding: var(--spacing-md) var(--spacing-sm);
		font-size: var(--font-size-medium);
	}

	/* モーダルのフルスクリーン風表示 */
	.modal {
		max-width: 100vw;
		width: 100vw;
		margin: 0;
		border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
		max-height: 90vh;
		overflow-y: auto;
	}

	/* モーダル入力フィールドを大きく */
	.modal input[type="text"],
	.modal input[type="date"],
	.modal textarea,
	.modal select {
		padding: var(--spacing-md);
		font-size: var(--font-size-medium);
		min-height: 44px;
	}

	/* 保存ボタンを全幅に */
	.modal .save-task-button {
		width: 100%;
		padding: var(--spacing-md);
		font-size: var(--font-size-medium);
		min-height: 48px;
	}

	/* 日付バッジを小さく */
	.due-date {
		font-size: 11px;
		padding: 2px 8px;
	}

	/* タグチップを少し小さく */
	.tag-chip {
		padding: 6px 10px;
		font-size: 13px;
	}
}


/* ============================================
 * Task Item Structure (Mobile-First)
 * ============================================
 * タスクアイテムの構造:
 * - .task-main-row: チェックボックス + 優先度 + 説明
 * - .task-item-tags: プロジェクト + コンテキスト + 日付
 * - .task-actions-row: 編集・削除ボタン
 */

/* メイン行: 横並び */
.task-main-row {
	display: flex;
	flex-direction: row;
	align-items: center;
	gap: var(--spacing-sm);
	flex: 1 1 100%;
	width: 100%;
	min-width: 0; /* テキスト省略を可能に */
}

/* タスク説明テキスト */
.task-description {
	flex: 1;
	min-width: 0;
	word-wrap: break-word;
	overflow-wrap: break-word;
	white-space: normal;
	writing-mode: horizontal-tb;
}

/* タグチップコンテナ（タスクアイテム内） */
.task-item-tags {
	display: inline-flex;
	flex-wrap: wrap;
	gap: 6px;
	align-items: center;
	margin-left: var(--spacing-sm);
}

/* アクションボタン行 - デスクトップではインライン */
.task-actions-row {
	display: inline-flex;
	gap: var(--spacing-xs);
	margin-left: auto;
	flex-shrink: 0;
}

/* デスクトップ: フラットな1行レイアウト */
@media (min-width: 769px) {
	.todotxt-view ul > li:not(.group-header) {
		display: flex;
		align-items: center;
		flex-wrap: wrap;
		gap: var(--spacing-sm);
	}

	.task-actions-row {
		opacity: 0;
		transition: var(--transition-default);
	}

	.todotxt-view ul > li:not(.group-header):hover .task-actions-row {
		opacity: 1;
	}
}

/* モバイル: 縦積みレイアウト */
@media (max-width: 768px) {
	/* メイン行は横並びを維持 */
	.task-main-row {
		display: flex;
		flex-direction: row;
		align-items: center;
		width: 100%;
	}

	.task-item-tags {
		display: flex;
		flex-wrap: wrap;
		margin-left: 0;
		margin-top: var(--spacing-sm);
		padding-left: calc(28px + var(--spacing-sm)); /* チェックボックス分インデント */
	}

	/* タグチップをモバイル用に調整 */
	.todotxt-view ul > li:not(.group-header) .tag-chip {
		padding: 4px 10px;
		font-size: 12px;
		min-height: 26px;
	}

	/* 日付バッジをモバイル用に調整 */
	.todotxt-view ul > li:not(.group-header) .due-date {
		padding: 4px 10px;
		font-size: 12px;
	}

	/* アクションボタン行をモバイルで常に表示 */
	.task-actions-row {
		display: flex;
		justify-content: flex-end;
		margin-left: 0;
		margin-top: var(--spacing-sm);
		padding-top: var(--spacing-sm);
		border-top: 1px solid var(--background-modifier-border);
	}
}

/* --------------------------------------------
 * Safe Area Support (iPhone X以降のノッチ対応)
 * -------------------------------------------- */
@supports (padding: max(0px)) {
	@media (max-width: 768px) {
		.todotxt-view {
			padding-left: max(var(--spacing-lg), env(safe-area-inset-left));
			padding-right: max(var(--spacing-lg), env(safe-area-inset-right));
			padding-bottom: max(var(--spacing-lg), env(safe-area-inset-bottom));
		}

		.fab-container {
			right: max(20px, calc(env(safe-area-inset-right) + 16px));
			bottom: max(20px, calc(env(safe-area-inset-bottom) + 16px));
		}
	}
}

/* --------------------------------------------
 * Landscape Orientation - Mobile
 * -------------------------------------------- */
@media (max-width: 768px) and (orientation: landscape) {
	/* 横向きでは高さを節約 */
	.control-bar {
		flex-direction: row;
		flex-wrap: wrap;
		padding: var(--spacing-sm) var(--spacing-md);
	}

	.control-bar select {
		flex: 1;
		min-width: 120px;
	}

	.control-bar .search-box {
		flex: 2;
		order: 0;
	}

	/* タスクアイテムをコンパクトに */
	.todotxt-view ul > li:not(.group-header) {
		padding: var(--spacing-sm) var(--spacing-md);
	}

	/* モーダルの高さを制限 */
	.modal {
		max-height: 80vh;
	}
}

/* ============================================
 * Side Panel - Compact UI
 * ============================================
 * サイドパネル専用のコンパクトなUIスタイル
 * メインビューよりも小さいパディング・フォントサイズ
 */

.todotxt-sidepanel-compact {
	/* コンテナのパディングを縮小 */
	padding: var(--spacing-md) !important;
}

.todotxt-sidepanel-compact .control-bar {
	/* コントロールバーをコンパクト化 */
	padding: var(--spacing-sm) var(--spacing-md);
	gap: var(--spacing-sm);
	margin-bottom: var(--spacing-lg);
}

.todotxt-sidepanel-compact .control-bar select,
.todotxt-sidepanel-compact .control-bar .search-box {
	/* フォントサイズを小さく */
	font-size: 12px;
	padding: 6px 12px;
}

.todotxt-sidepanel-compact ul > li:not(.group-header) {
	/* タスクアイテムのパディングを縮小 */
	padding: var(--spacing-sm) var(--spacing-md);
	margin-bottom: 6px;
}

.todotxt-sidepanel-compact .task-description {
	/* タスク説明のフォントサイズを縮小 */
	font-size: var(--font-size-small);
}

.todotxt-sidepanel-compact .priority {
	/* 優先度バッジを小さく */
	width: 20px;
	height: 20px;
	font-size: 10px;
}

.todotxt-sidepanel-compact .tag-chip {
	/* タグチップを小さく */
	padding: 4px 8px;
	font-size: 11px;
	min-height: 24px;
}

.todotxt-sidepanel-compact .due-date {
	/* 期限日バッジを小さく */
	padding: 2px 8px;
	font-size: 11px;
}

.todotxt-sidepanel-compact .edit-task-button,
.todotxt-sidepanel-compact .delete-task-button {
	/* アクションボタンを小さく */
	padding: 4px 8px;
	font-size: 11px;
}

.todotxt-sidepanel-compact .group-header {
	/* グループヘッダーをコンパクト化 */
	font-size: var(--font-size-medium);
	padding: var(--spacing-md) var(--spacing-sm);
	margin-top: var(--spacing-lg);
	margin-bottom: var(--spacing-xs);
}

.todotxt-sidepanel-compact .fab-container {
	/* FABボタンを少し小さく */
	bottom: 16px;
	right: 16px;
}

.todotxt-sidepanel-compact .add-task-button {
	width: 48px;
	height: 48px;
	font-size: 24px;
}

.todotxt-sidepanel-compact .ai-add-task-button {
	width: 36px;
	height: 36px;
	font-size: 16px;
}

/* --------------------------------------------
 * Touch Device Optimizations
 * -------------------------------------------- */
@media (hover: none) and (pointer: coarse) {
	/* タッチデバイスでは常に操作ボタンを表示 */
	.todotxt-view ul > li:not(.group-header) .edit-task-button,
	.todotxt-view ul > li:not(.group-header) .delete-task-button {
		opacity: 1;
	}

	/* ホバー効果の代わりにアクティブ状態を強調 */
	.task-checkbox:active {
		transform: scale(0.95);
		background: rgba(var(--interactive-accent-rgb), 0.15);
	}

	.todotxt-view ul > li:not(.group-header):active {
		background: var(--background-modifier-hover);
	}

	/* ボタンのアクティブ状態 */
	.edit-task-button:active,
	.delete-task-button:active {
		transform: scale(0.95);
	}

	/* より大きなタップ領域 */
	.task-checkbox {
		min-width: 44px;
		min-height: 44px;
		/* 視覚的サイズは変えずにタップ領域を拡大 */
		position: relative;
	}

	.task-checkbox::before {
		content: '';
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 44px;
		height: 44px;
	}
}

/* ============================================
 * AI Task Input Dialog - Modern Design
 * ============================================
 * Apple-like clean design with ample whitespace
 * and intuitive visual hierarchy
 */

/* ダイアログ全体のスタイル */
.ai-task-input-dialog {
	padding: var(--spacing-xl);
	min-width: 420px;
	max-width: 500px;
}

/* ヘッダーセクション */
.ai-dialog-header {
	margin-bottom: var(--spacing-xl);
	text-align: center;
}

.ai-dialog-header h2 {
	margin: 0 0 var(--spacing-sm) 0;
	font-size: 20px;
	font-weight: 600;
	color: var(--text-normal);
}

.ai-dialog-description {
	margin: 0;
	font-size: var(--font-size-small);
	color: var(--text-muted);
	line-height: 1.5;
}

/* 入力セクション */
.ai-dialog-input-section {
	margin-bottom: var(--spacing-lg);
}

/* メインテキストエリア */
.ai-task-textarea {
	width: 100%;
	min-height: 160px;
	padding: var(--spacing-lg);
	border: 1px solid var(--background-modifier-border);
	border-radius: var(--border-radius-md);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: var(--font-size-medium);
	line-height: 1.6;
	resize: vertical;
	transition: var(--transition-default);
	box-sizing: border-box;
}

.ai-task-textarea::placeholder {
	color: var(--text-faint);
	line-height: 1.6;
}

.ai-task-textarea:hover {
	border-color: var(--interactive-accent);
}

.ai-task-textarea:focus {
	outline: none;
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 3px rgba(var(--interactive-accent-rgb), 0.15);
}

/* ヒントセクション - 横並びのタグ */
.ai-dialog-hints {
	display: flex;
	flex-wrap: wrap;
	gap: var(--spacing-sm);
	margin-bottom: var(--spacing-xl);
	padding: var(--spacing-md);
	background: var(--background-secondary);
	border-radius: var(--border-radius-md);
}

/* ヒントアイテム */
.ai-hint-item {
	display: inline-flex;
	align-items: center;
	gap: 6px;
	padding: 6px 12px;
	background: var(--background-primary);
	border-radius: 20px;
	font-size: var(--font-size-small);
	white-space: nowrap;
}

.ai-hint-icon {
	font-size: 14px;
	opacity: 0.7;
}

.ai-hint-label {
	font-weight: 500;
	color: var(--text-normal);
}

.ai-hint-example {
	color: var(--text-muted);
	font-size: 11px;
}

/* ボタンエリア */
.ai-dialog-buttons {
	display: flex;
	justify-content: flex-end;
	gap: var(--spacing-sm);
	padding-top: var(--spacing-md);
	border-top: 1px solid var(--background-modifier-border);
}

/* キャンセルボタン */
.ai-btn-cancel {
	padding: var(--spacing-sm) var(--spacing-lg);
	background: transparent;
	border: 1px solid var(--background-modifier-border);
	border-radius: var(--border-radius-sm);
	color: var(--text-muted);
	font-size: var(--font-size-small);
	font-weight: 500;
	cursor: pointer;
	transition: var(--transition-default);
}

.ai-btn-cancel:hover {
	background: var(--background-modifier-hover);
	border-color: var(--text-muted);
	color: var(--text-normal);
}

/* 生成ボタン */
.ai-btn-generate {
	padding: var(--spacing-sm) var(--spacing-xl);
	font-size: var(--font-size-small);
	font-weight: 600;
	display: inline-flex;
	align-items: center;
	gap: var(--spacing-sm);
}

.ai-btn-generate::before {
	content: "✨";
	font-size: 14px;
}

/* ============================================
 * AI Dialog - Dark Mode Support
 * ============================================ */
.theme-dark .ai-dialog-hints {
	background: rgba(255, 255, 255, 0.03);
}

.theme-dark .ai-hint-item {
	background: rgba(255, 255, 255, 0.06);
}

.theme-dark .ai-task-textarea {
	background: rgba(255, 255, 255, 0.03);
}

/* ============================================
 * AI Dialog - Mobile Responsive
 * ============================================ */
@media (max-width: 768px) {
	.ai-task-input-dialog {
		min-width: unset;
		max-width: 100%;
		padding: var(--spacing-lg);
	}

	.ai-dialog-hints {
		flex-direction: column;
	}

	.ai-hint-item {
		width: 100%;
		justify-content: flex-start;
	}

	.ai-dialog-buttons {
		flex-direction: column-reverse;
	}

	.ai-btn-cancel,
	.ai-btn-generate {
		width: 100%;
		justify-content: center;
		padding: var(--spacing-md);
		min-height: 44px;
	}
}
